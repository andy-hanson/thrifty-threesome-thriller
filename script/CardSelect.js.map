{"version":3,"sources":["/home/andy/programming/thrifty-threesome-thriller/assets/script/CardSelect.ms"],"names":[],"mappings":";;;;CAOA,gBAAU,KAAI,MAAK;MAAO;;CAC1B,gBAAU,KAAI,MAAK;MAAO;;CAE1B,iCACiB;EAAL,YAAA,KACK;;0BAAf,qBAAmB;0BACnB,iBAAe;GAEd,KAAM,sBACyB,IAAA;WAA/B;;GAEI,QAAA,KAAA,sBACiB;IAArB,GAAI,QAAO,OACS,IAAA;KAAnB,uBAAgB;IAAA;GAAA;EAAA;YAGR;SA8DT;GA9DI,QAAA,KA8DJ,oBA7DkB;IAAlB,mBAAgB;GAAA;GACZ,QAAA,KA4DJ,gBA3Dc;IAAd,oBAAiB;GAAA;GA2DjB,eAzDY;GAyDZ,oBAxDiB;GAwDjB,gBAvDa;EAAA;eAEA,aACU;SAoDvB;GAAA;GAAA,gBAnDa;GACT,QAAA,KAkDJ,gBAjDc;IAAd,oBAAiB;GAAA;EAAA;mBAEA,KACI;SA8CrB;GA9CD,GAAI,CA8CH,wCA7CkC;IAC7B,GAAJ,kBACc;KA2Cf,yBA3CmB;IAAA,OAEd;KAyCL,uBAzCiB;IAAA;GAAA;EAAA;kBAED,KACI;SAsCpB;GAAA,yBAtCmB;GACpB,sBAAmB;GAqClB;;qBAjCkB;SAiClB;GAjCD,GAAI,OAiCH,2BAjC4B,GACC;IAC7B,YAAM,0BA+BN,oBA/BmC,WA+BnC,oBA/BqD,WA+BrD,oBA/BuE;IACjE,CAAA,MAAI,UAAQ;IA8BlB,eA5Ba;IACb,MAAO,cAAY,IACM,IAAA;KA0BzB,eA1Bc;KAER,GAAJ,MACG;MAuBL;YArBM;MAqBN;;;;;cAlBW;SAkBX;GAAA;GAAA;GAhBI,QAAA,KAgBJ,gBAfc;IAAd,oBAAiB;GAAA;GAejB;;oBAXiB;SAWjB;GAXI,QAAA,KAWJ,oBAVkB;IAAlB,mBAAgB;GAAA;GACjB,SASC;;oBAPkB,KACI;SAMtB;GAND,OAMC,oBANiB;GAClB,sBAAmB;EAAA;oBAGF;SAEhB;GAFD,gCAAsB,CAAK,EAAI,SAE9B;GADD,GAAI,0BACmB;IAAtB;;UACD,EAAI;EAAA;CAAA;CAtFN,wBAAA","file":"CardSelect.js","sourcesContent":["use\n\thowler Howl\n\tmsl.io.time $after-time\n\tmsl.$ $done\n\t.dom elem on\n\t.is-threesome?\n\nget-set = new Howl (src. \"sound/get-set.wav\")\nbad-set = new Howl (src. \"sound/bad-set.wav\")\n\nCardSelect. class\n\tconstruct! .game\n\t\t.selectedCards ::= []\n\t\t.hintCards ::= []\n\n\t\t(elem \"game\").oncontextmenu := |\n\t\t\t.-context-menu!()\n\n\t\tfor! .game.table.cards\n\t\t\ton \"click\" _.cell !|\n\t\t\t\t.-card-clicked! _\n\n\t\"reset!\" !|\n\t\tfor! .selectedCards\n\t\t\t_.set-selected! false\n\t\tfor! .hintCards\n\t\t\t_.set-highlight! false\n\n\t\t.selectOn := true\n\t\t.selectedCards := []\n\t\t.hintCards := []\n\n\t\"show-hint!\" !|hint-cards\n\t\t.-deselect-all!()\n\t\t.hintCards := hint-cards\n\t\tfor! .hintCards\n\t\t\t_.set-highlight! true\n\n\t\"-card-clicked!\" !|card\n\t\tif! and .game.isPlaying() .selectOn\n\t\t\tcase!\n\t\t\t\tcard.selected?\n\t\t\t\t\t.-deselect-card! card\n\t\t\t\telse\n\t\t\t\t\t.-select-card! card\n\n\t\"-select-card!\" !|card\n\t\t.selectedCards.push card\n\t\tcard.set-selected! true\n\t\t.-check-for-set!()\n\n\t\"-check-for-set!\" !|\n\t\tif! =? .selectedCards.length 3\n\t\t\ttodo ...(.selectedCards)\n\t\t\tok? = is-threesome? .selectedCards[0] .selectedCards[1] .selectedCards[2]\n\t\t\t(cond ok? get-set bad-set).play()\n\n\t\t\t.selectOn := false\n\t\t\t$done ($after-time 600 !|\n\t\t\t\t.selectOn := true\n\t\t\t\tcase!\n\t\t\t\t\tok?\n\t\t\t\t\t\t.-on-set!()\n\t\t\t\t\telse\n\t\t\t\t\t\t.-deselect-all!()\n\n\t\"-on-set!\" !|\n\t\t.game.table.reset-cards! .selectedCards\n\t\t.-deselect-all!()\n\t\tfor! .hintCards\n\t\t\t_.set-highlight! false\n\t\t.game.onSet()\n\n\t\"-deselect-all!\" !|\n\t\tfor! .selectedCards\n\t\t\t_.set-selected! false\n\t\tempty! .selectedCards\n\n\t\"-deselect-card!\" !|card\n\t\t-! .selectedCards card\n\t\tcard.set-selected! false\n\n\t\"-context-menu!\" |\n\t\tany-selected-cards? = and (not empty? .selectedCards) .selectOn\n\t\tif! any-selected-cards?\n\t\t\t.-deselect-all!()\n\t\tnot any-selected-cards?\n"],"sourceRoot":"/source/"}