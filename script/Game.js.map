{"version":3,"sources":["/home/andy/programming/thrifty-threesome-thriller/assets/script/Game.ms"],"names":[],"mappings":";;;;CAOA,iBAAW,KAAI,MAAK;MAAO;;CAC3B,eAAW;CAEX,2BACW;EACA,aAAA;mBAAT,aAAS,KAAI;mBACb,kBAAc,KAAI,YAAW;GAE7B,GAAI,SAAQ,OACS,IAAA;IAApB;;GACD,GAAI,QAAQ,KAAM,QACS,IAAA;IAA1B;;GACD,GAAI,QAAQ,KAAM,QACS,IAAA;IAA1B;;;aAGW;SAyDW;UAjCtB,OAiCsB,YAzDZ;;WAGA;SAsDY;GAtDf,OAsDe;SArDrB,UACQ;;;SACR,UACQ;KAkDa;;;SAjDrB,SACO;;;;;;YAGC;SA6Ca;GAAA;GAAA;GAAA;GAAA,YA1CZ;GA0CY,eAzCb;GAyCa,WAxCd;GAwCc;;SApCd;SAoCc;GAAA,WADZ,IACY,WApCN;GAChB,KAAM,oBAmCgB;GAjClB,GAAJ,OAiCsB,WAjCb,GACC;IAAT;IAgCqB,YA/BV;IAEX,WACS,eAAA;KA4BY,YA5BT;;IACZ,WAAW,KAAK;GAAA,OAEb;IAAH,YACU,gBAAA;KAwBW;;IAvBrB,WAAW,MAAM;GAAA;EAAA;SAGV;SAoBc;GAAA,eApBZ,IAAE,EAoBU;;WAlBX,YACS;SAiBE;GAAA,YAjBb;GACT,KAAM,qBAgBgB;;aAbZ;SAaY;GAbvB,WAAO,KAAM;GACb,WAAO,KAAM;GACb,YAAQ;GACR,aASW,IATA,kBAAmB,KAAM;GAEpC,wBAC0B,KAAA;IAAzB,WAAO,SAAS,MAAM;WACrB,GAAC,IAAE,KAAK;;GAMa,uBAJR,MAAM;EAAA;QAGb;SACe;GAAA,eADZ,IACY,YADH;GACG;;;CAhFzB,wBAAA","file":"Game.js","sourcesContent":["use\n\tglobal window setTimeout\n\thowler Howl\n\t.CardSelect\n\t.CardTable\n\t.dom elem on\n\ntimes-up = new Howl (src. \"sound/times-up.wav\")\nGameTime = 180\n\nGame. class\n\tconstruct!\n\t\t.table = new CardTable\n\t\t.cardSelect = new CardSelect this\n\n\t\ton \"resize\" window !|\n\t\t\t.resize!()\n\t\ton \"click\" (elem \"hint\") !|\n\t\t\t.hint()\n\t\ton \"click\" (elem \"game\") !|\n\t\t\t.clicked()\n\n\t\"isPlaying\" |\n\t\t=? .state \"playing\"\n\n\t\"clicked\" !|\n\t\tswitch! .state\n\t\t\t\"playing\"\n\t\t\t\tpass\n\t\t\t\"waiting\"\n\t\t\t\t.reset!()\n\t\t\t\"frozen\"\n\t\t\t\tpass\n\n\t\"reset!\" !|\n\t\t.resize!()\n\t\t.table.reset!()\n\t\t.cardSelect.reset!()\n\t\t.state := \"playing\"\n\t\t.setScore 0\n\t\t.time := GameTime\n\t\t.clock()\n\n\t\"clock\" !|\n\t\t.time := - .time 1\n\t\t(elem \"time\").textContent := .time\n\t\tcase!\n\t\t\t=? .time 0\n\t\t\t\ttimes-up.play()\n\t\t\t\t.state := \"frozen\"\n\t\t\t\ttodo $after\n\t\t\t\twait = !|\n\t\t\t\t\t.state := \"waiting\"\n\t\t\t\tsetTimeout wait 5000\n\t\t\telse\n\t\t\t\tclock = !|\n\t\t\t\t\t.clock()\n\t\t\t\tsetTimeout clock 1000\n\n\t\"onSet\" !|\n\t\t.setScore (+ 1 .score)\n\n\t\"setScore\" !|new-score\n\t\t.score := new-score\n\t\t(elem \"score\").textContent := .score\n\n\t\"resize!\" !|\n\t\tmain = elem \"main\"\n\t\tgame = elem \"game\"\n\t\twidth = game.offsetWidth\n\t\theight = - main.offsetHeight (elem \"hud\").offsetHeight\n\n\t\tgame.style.borderRadius :=\n\t\t\tsize = Math.min width height\n\t\t\t\"{* size 0.1}px\"\n\n\t\t.table.resize! width height\n\n\t\"hint\" !|\n\t\t.setScore (- .score 1)\n\t\t.cardSelect.show-hint! .table.find-set()\n"],"sourceRoot":"/source/"}