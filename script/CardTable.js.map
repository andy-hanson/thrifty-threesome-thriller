{"version":3,"sources":["/home/andy/programming/thrifty-threesome-thriller/assets/script/CardTable.ms"],"names":[],"mappings":";;;;CAMA,eAAS;CACT,eAAS;CACT,gBAAU,IAAE,SAAO;CAEnB,gCACgB;EACL,aAAA;GAAT,iBAAc,KAAM,QAAO;;QAGnB;SAoEsB;GApEzB,QAAA,KAoEyB,YAnEnB;IAAV;;;cAGU;SAgEmB;GA/D9B,QAAQ;GACR,SAAS;GAEJ,QAAA,MAAM,KA+CK,OA/CK,EAAE,WACO;IAA7B,iBA2D6B,YA3DjB;IACP,QAAA,MAAM,KA6CI,OAAO,IA7CE,EAAE,IAAI,WACO;KAApC,iBAyD4B,YAzDhB;KACP,QAAA,MAAM,KA2CG,OAAO,IA3CG,EAAE,IAAI,WACO;MAApC,iBAuD2B,YAvDf;MACZ,GAAI,kBAAc,GAAG,GAAG,IACE;WAAlB,CAAC,GAAG,GAAG;YACN;OACR;MAAA;KAAA;KACF,GAAI,KACI;MAAP;KAAA;IAAA;IACF,GAAI,KACI;KAAP;IAAA;GAAA;UAEF;EAAA;YAGU;SA0CoB;GAAA;;iBAxCd,mBACc;SAuCA;GAtC1B,OAAA;IAAE,QAAA,KAAA,mBACc;KAAlB;;IACD,GAoC6B,sBAnCZ;KAAhB;IAAA;GAAA;EAAA;YAES,MAAM,OACM;SAgCO;GAhC9B,mBACc,IADC,MAAM;GACrB,oBAAc,IAAE,OAAO;GAClB,QAAA,KA8ByB,YA7BnB;IAAV,aAAU,aAAW;GAAA;EAAA;iBAGR;SA0BgB;UA1BzB,IAC8B;oBAAlC,OAAQ;oBAyBqB,cAxBpB;IACJ,QAAA,KAAK,KAUK,OAVK,EAAE,UACM;KAA3B,UAAM,YAAY;KACb,QAAA,KAAK,KAQI,OARM,EAAE,UACM;MAoBA,iBApBf,KAAI,MAAM,eAAe;KAAA;IAAA;;MANnC,uBAAwB;;0BASN;SAiBO;GAhB9B,QAAQ;GAEH,QAAA,MAAM,KACK,OADK,EAAE,WACO;IAAxB,QAAA,MAAM,KAAI,OAAO,IAAE,GAAG,GAAG,WACO;KAApC,GASE,eAG0B,YAZd,iBAYc,YAZE,UACQ;UAA9B,SAWoB,YAXZ,YAWY,YAXD;MAC1B;KAAA;IAAA;IACF,GAAI,IACG;KAAN;IAAA;GAAA;UAEF;EAAA;uBAGoB;SAGU;UAH9B,EAAI,OAAG,KAGuB;;gBAAjB;SAAiB;UAA9B,CAA8B,8BAAJ,EAAI;;;CAnFhC,wBAAA","file":"CardTable.js","sourcesContent":["use\n\tglobal document\n\t.Card\n\t.dom elem set-content!\n\t.is-threesome?\n\nN-Rows = 3\nN-Cols = 4\nN-Cards = * N-Rows N-Cols\n\nCardTable. class\n\tconstruct!\n\t\tset-content! (elem \"game\") .-make-table()\n\n\t\"draw\" !|\n\t\tfor! .cards\n\t\t\t_.draw!()\n\n\t\"find-set\" |\n\t\t| TODO:SYNTAX Loop labels\n\t\tres ::= null\n\t\tdone ::= false\n\n\t\tfor! i1 in new Range 0 N-Cards\n\t\t\tc1 = .cards[i1]\n\t\t\tfor! i2 in new Range (+ 1 i1) N-Cards\n\t\t\t\tc2 = .cards[i2]\n\t\t\t\tfor! i3 in new Range (+ 1 i2) N-Cards\n\t\t\t\t\tc3 = .cards[i3]\n\t\t\t\t\tif! is-threesome? c1 c2 c3\n\t\t\t\t\t\tres := [c1 c2 c3]\n\t\t\t\t\t\tdone := true\n\t\t\t\t\t\tbreak!\n\t\t\t\tif! done\n\t\t\t\t\tbreak!\n\t\t\tif! done\n\t\t\t\tbreak!\n\n\t\tres\n\n\t\"reset!\" !|\n\t\t.reset-cards! .cards\n\n\t\"reset-cards!\" !|cards-to-reset\n\t\tfor!\n\t\t\tfor! cards-to-reset\n\t\t\t\t_.randomize!()\n\t\t\tif! .-board-ok?()\n\t\t\t\tbreak!\n\n\t\"resize!\" !|width height\n\t\tcard-width = / width N-Cols\n\t\tcard-height = / height N-Rows\n\t\tfor! .cards\n\t\t\t_.resize! card-width card-height\n\n\t\"-make-table\" |\n\t\twith document.createElement \"table\"\n\t\t\t_.id = \"cardtable\"\n\t\t\t.cards = []\n\t\t\tfor! r in new Range 0 N-Rows\n\t\t\t\trow = _.insertRow r\n\t\t\t\tfor! c in new Range 0 N-Cols\n\t\t\t\t\t.cards.push new Card (row.insertCell c)\n\n\t\"-is-repeat-on-board?\" |\n\t\t| TODO:SYNTAX Loop labels\n\t\tres ::= false\n\n\t\tfor! i1 in new Range 0 N-Cards\n\t\t\tfor! i2 in new Range (+ i1 1) N-Cards\n\t\t\t\tif! =? .cards[i1].data .cards[i2].data\n\t\t\t\t\tres := [.cards[i1] .cards[i2]]\n\t\t\t\t\tbreak!\n\t\t\tif! res\n\t\t\t\tbreak!\n\n\t\tres\n\n\t\"-is-set-on-board?\" |\n\t\tnot =? null .find-set()\n\n\t\"-board-ok?\" |\n\t\tand .-is-set-on-board?() (not .-is-repeat-on-board?())\n"],"sourceRoot":"/source/"}